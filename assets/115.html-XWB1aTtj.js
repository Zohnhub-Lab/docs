import{d as M,h as k,r as v,o as m,c as b,b as n,e as s,a,I as f,an as x,v as A,w as i,f as t,aw as g,_ as K}from"./app--VcHmvhe.js";import{_ as T,a as D,b as S,c as z,d as F}from"./add_error-0FyA4cZ0.js";import{_ as R}from"./offline_download_error-eo5g2FwF.js";const L=t('<h1 id="_115-网盘-分享" tabindex="-1"><a class="header-anchor" href="#_115-网盘-分享" aria-hidden="true">#</a> 115 网盘/分享</h1><h2 id="_115-个人网盘" tabindex="-1"><a class="header-anchor" href="#_115-个人网盘" aria-hidden="true">#</a> 115 个人网盘</h2><h3 id="根文件夹-id" tabindex="-1"><a class="header-anchor" href="#根文件夹-id" aria-hidden="true">#</a> <strong>根文件夹 ID</strong></h3><p>打开 115 网盘官网，点击进入要设置的文件夹时点击 URL 中 <code>cid</code>后面的数字</p>',4),W={href:"https://115.com/?cid=249163533602609229&offset=0&tab=&mode=wangpan",target:"_blank",rel:"noopener noreferrer"},G=t(`<p>这个文件夹的 <code>根文件夹ID</code> 即为 <code>249163533602609229</code></p><br><h3 id="cookie获取方式" tabindex="-1"><a class="header-anchor" href="#cookie获取方式" aria-hidden="true">#</a> <strong>Cookie获取方式</strong></h3><p>挂载115云盘提示如下信息，是因为 115已经下架了 <code>Windows、Mac、Linux</code> 这三个客户端的应用</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;登录失败，系统已下架！如果你有电脑端的使用需求，我们诚挚邀请你下载体验115产品专属客户端“115浏览器”或在线使用“115网页端(115.com)”，畅享智能高效云生活。&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;errno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;登录失败，系统已下架！如果你有电脑端的使用需求，我们诚挚邀请你下载体验115产品专属客户端“115浏览器”或在线使用“115网页端(115.com)”，畅享智能高效云生活。&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你获取的是这三个设备的Cookie自然就无法使用，请重新获取其它设备的Cookie进行挂载</p><br><h4 id="_1-qrcode-扫码方式登录" tabindex="-1"><a class="header-anchor" href="#_1-qrcode-扫码方式登录" aria-hidden="true">#</a> <strong>1. QRCode 扫码方式登录</strong></h4>`,8),N=["disabled"],Q=n("br",null,null,-1),I=n("br",null,null,-1),J={style:{margin:"4px"}},U=["src"],O={class:"hint-container info"},V={class:"hint-container-title"},Z=n("hr",null,null,-1),B=n("i",{class:"fa-solid fa-up fa-bounce",style:{color:"#70c6be"}},null,-1),H=n("code",null," 使用115网盘 APP 扫描然后点击",-1),j=n("strong",null,[n("code",null,"二维码令牌")],-1),X=n("code",null,"Qrcode源",-1),Y=t("<ul><li>可选设备：<code>Web</code>，<code>android</code>，<code>ios</code>，<code>tv</code>，<code>alipaymini</code>，<code>wechatmini</code>，<code>qandroid</code><ul><li>不推荐选择 <code>Web</code> 和 <code>Android</code>(<code>ios</code>) ，因为自己常用的设备登录后会将原本登录的挤下线</li></ul></li></ul>",1),$=t('<br><p><img src="'+S+'" alt=""></p><br><h4 id="_2-手动抓取-cookie-方式登录" tabindex="-1"><a class="header-anchor" href="#_2-手动抓取-cookie-方式登录" aria-hidden="true">#</a> <strong>2. 手动抓取 Cookie 方式登录</strong></h4><p><code>Cookie</code>可以浏览器登录从浏览器的<code>api</code>中获取，也可用抓包 115 应用获取 cookie，115 应用的有效期比较长，注意 cookie 最后不要有<code>;</code>。</p><br><h4 id="_3-使用python脚本获取-cookie" tabindex="-1"><a class="header-anchor" href="#_3-使用python脚本获取-cookie" aria-hidden="true">#</a> <strong>3. 使用Python脚本获取 Cookie</strong></h4><p><i class="fa-solid fa-lightbulb fa-bounce" style="color:#4abf8a;"></i> 展开详细说明进行查看教程和脚本源码</p>',8),nn={class:"hint-container details"},sn=n("summary",null,"详细说明",-1),an={class:"hint-container details"},tn=t(`<summary>查看源码</summary><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python3</span>
<span class="token comment"># encoding: utf-8</span>

<span class="token string">&quot;扫码获取 115 cookie&quot;</span>

__author__ <span class="token operator">=</span> <span class="token string">&quot;ChenyangGao &lt;https://chenyanggao.github.io&gt;&quot;</span>
__version__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
__all__ <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;AppEnum&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;get_qrcode_token&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;get_qrcode_status&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;post_qrcode_result&quot;</span><span class="token punctuation">,</span> 
    <span class="token string">&quot;get_qrcode&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;login_with_qrcode&quot;</span><span class="token punctuation">,</span> 
<span class="token punctuation">]</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> argparse <span class="token keyword">import</span> ArgumentParser<span class="token punctuation">,</span> RawTextHelpFormatter

    parser <span class="token operator">=</span> ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token triple-quoted-string string">&quot;&quot;&quot;\\
扫码获取 115 cookie

默认在命令行输出，需要安装 qrcode: pip install qrcode
    - https://pypi.org/project/qrcode/
可以指定 -o 或 --open-qrcode 直接打开图片扫码
&quot;&quot;&quot;</span><span class="token punctuation">,</span> formatter_class<span class="token operator">=</span>RawTextHelpFormatter<span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">&quot;?&quot;</span><span class="token punctuation">,</span> choices<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;android&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ios&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;linux&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mac&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;windows&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tv&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alipaymini&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wechatmini&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qandroid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">&quot;选择一个 app 进行登录，注意：这会把已经登录的相同 app 踢下线&quot;</span><span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&quot;-o&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--open-qrcode&quot;</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">&quot;store_true&quot;</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">&quot;打开二维码图片，而不是在命令行输出&quot;</span><span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&quot;-v&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--version&quot;</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">&quot;store_true&quot;</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">&quot;输出版本号&quot;</span><span class="token punctuation">)</span>
    args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> args<span class="token punctuation">.</span>version<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> __version__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">raise</span> SystemExit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum
<span class="token keyword">from</span> json <span class="token keyword">import</span> loads
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlencode
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen<span class="token punctuation">,</span> Request


AppEnum <span class="token operator">=</span> Enum<span class="token punctuation">(</span><span class="token string">&quot;AppEnum&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;web, android, ios, linux, mac, windows, tv, alipaymini, wechatmini, qandroid&quot;</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">get_enum_name</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span>name
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> cls<span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token punctuation">.</span>name
    <span class="token keyword">except</span> KeyError<span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
    <span class="token keyword">return</span> cls<span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span>name


<span class="token keyword">def</span> <span class="token function">get_qrcode_token</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;获取登录二维码，扫码可用
    GET https://qrcodeapi.115.com/api/1.0/web/1.0/token/
    :return: dict
    &quot;&quot;&quot;</span>
    api <span class="token operator">=</span> <span class="token string">&quot;https://qrcodeapi.115.com/api/1.0/web/1.0/token/&quot;</span>
    <span class="token keyword">return</span> loads<span class="token punctuation">(</span>urlopen<span class="token punctuation">(</span>api<span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">get_qrcode_status</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;获取二维码的状态（未扫描、已扫描、已登录、已取消、已过期等）
    GET https://qrcodeapi.115.com/get/status/
    :param payload: 请求的查询参数，取自 \`login_qrcode_token\` 接口响应，有 3 个
        - uid:  str
        - time: int
        - sign: str
    :return: dict
    &quot;&quot;&quot;</span>
    api <span class="token operator">=</span> <span class="token string">&quot;https://qrcodeapi.115.com/get/status/?&quot;</span> <span class="token operator">+</span> urlencode<span class="token punctuation">(</span>payload<span class="token punctuation">)</span>
    <span class="token keyword">return</span> loads<span class="token punctuation">(</span>urlopen<span class="token punctuation">(</span>api<span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">post_qrcode_result</span><span class="token punctuation">(</span>uid<span class="token punctuation">,</span> app<span class="token operator">=</span><span class="token string">&quot;web&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;获取扫码登录的结果，并且绑定设备，包含 cookie
    POST https://passportapi.115.com/app/1.0/{app}/1.0/login/qrcode/
    :param uid: 二维码的 uid，取自 \`login_qrcode_token\` 接口响应
    :param app: 扫码绑定的设备，可以是 int、str 或者 AppEnum
        app 目前发现的可用值：
            - 1,  &quot;web&quot;,        AppEnum.web
            - 2,  &quot;android&quot;,    AppEnum.android
            - 3,  &quot;ios&quot;,        AppEnum.ios
            - 4,  &quot;linux&quot;,      AppEnum.linux
            - 5,  &quot;mac&quot;,        AppEnum.mac
            - 6,  &quot;windows&quot;,    AppEnum.windows
            - 7,  &quot;tv&quot;,         AppEnum.tv
            - 8,  &quot;alipaymini&quot;, AppEnum.alipaymini
            - 9,  &quot;wechatmini&quot;, AppEnum.wechatmini
            - 10, &quot;qandroid&quot;,   AppEnum.qandroid
    :return: dict，包含 cookie
    &quot;&quot;&quot;</span>
    app <span class="token operator">=</span> get_enum_name<span class="token punctuation">(</span>app<span class="token punctuation">,</span> AppEnum<span class="token punctuation">)</span>
    payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">:</span> app<span class="token punctuation">,</span> <span class="token string">&quot;account&quot;</span><span class="token punctuation">:</span> uid<span class="token punctuation">}</span>
    api <span class="token operator">=</span> <span class="token string">&quot;https://passportapi.115.com/app/1.0/%s/1.0/login/qrcode/&quot;</span> <span class="token operator">%</span> app
    <span class="token keyword">return</span> loads<span class="token punctuation">(</span>urlopen<span class="token punctuation">(</span>Request<span class="token punctuation">(</span>api<span class="token punctuation">,</span> data<span class="token operator">=</span>urlencode<span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">get_qrcode</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;获取二维码图片（注意不是链接）
    :return: 一个文件对象，可以读取
    &quot;&quot;&quot;</span>
    url <span class="token operator">=</span> <span class="token string">&quot;https://qrcodeapi.115.com/api/1.0/mac/1.0/qrcode?uid=%s&quot;</span> <span class="token operator">%</span> uid
    <span class="token keyword">return</span> urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">login_with_qrcode</span><span class="token punctuation">(</span>app<span class="token operator">=</span><span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span> scan_in_console<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;用二维码登录
    :param app: 扫码绑定的设备，可以是 int、str 或者 AppEnum
        app 目前发现的可用值：
            - 1,  &quot;web&quot;,        AppEnum.web
            - 2,  &quot;android&quot;,    AppEnum.android
            - 3,  &quot;ios&quot;,        AppEnum.ios
            - 4,  &quot;linux&quot;,      AppEnum.linux
            - 5,  &quot;mac&quot;,        AppEnum.mac
            - 6,  &quot;windows&quot;,    AppEnum.windows
            - 7,  &quot;tv&quot;,         AppEnum.tv
            - 8,  &quot;alipaymini&quot;, AppEnum.alipaymini
            - 9,  &quot;wechatmini&quot;, AppEnum.wechatmini
            - 10, &quot;qandroid&quot;,   AppEnum.qandroid
    :return: dict，扫码登录结果
    &quot;&quot;&quot;</span>
    qrcode_token <span class="token operator">=</span> get_qrcode_token<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span>
    qrcode <span class="token operator">=</span> qrcode_token<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">&quot;qrcode&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> scan_in_console<span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">from</span> qrcode <span class="token keyword">import</span> QRCode
        <span class="token keyword">except</span> ModuleNotFoundError<span class="token punctuation">:</span>
            <span class="token keyword">from</span> sys <span class="token keyword">import</span> executable
            <span class="token keyword">from</span> subprocess <span class="token keyword">import</span> run
            run<span class="token punctuation">(</span><span class="token punctuation">[</span>executable<span class="token punctuation">,</span> <span class="token string">&quot;-m&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pip&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;install&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qrcode&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> check<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
            <span class="token keyword">from</span> qrcode <span class="token keyword">import</span> QRCode <span class="token comment"># type: ignore</span>
        qr <span class="token operator">=</span> QRCode<span class="token punctuation">(</span>border<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        qr<span class="token punctuation">.</span>add_data<span class="token punctuation">(</span>qrcode<span class="token punctuation">)</span>
        qr<span class="token punctuation">.</span>print_ascii<span class="token punctuation">(</span>tty<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">from</span> atexit <span class="token keyword">import</span> register
        <span class="token keyword">from</span> os <span class="token keyword">import</span> remove
        <span class="token keyword">from</span> threading <span class="token keyword">import</span> Thread
        <span class="token keyword">from</span> tempfile <span class="token keyword">import</span> NamedTemporaryFile
        qrcode_image <span class="token operator">=</span> get_qrcode<span class="token punctuation">(</span>qrcode_token<span class="token punctuation">[</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">with</span> NamedTemporaryFile<span class="token punctuation">(</span>suffix<span class="token operator">=</span><span class="token string">&quot;.png&quot;</span><span class="token punctuation">,</span> delete<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>qrcode_image<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            f<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
        register<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> remove<span class="token punctuation">(</span>f<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">open_qrcode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            platform <span class="token operator">=</span> <span class="token builtin">__import__</span><span class="token punctuation">(</span><span class="token string">&quot;platform&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> platform <span class="token operator">==</span> <span class="token string">&quot;Windows&quot;</span><span class="token punctuation">:</span>
                <span class="token keyword">from</span> os <span class="token keyword">import</span> startfile <span class="token comment"># type: ignore</span>
                startfile<span class="token punctuation">(</span>f<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token keyword">elif</span> platform <span class="token operator">==</span> <span class="token string">&quot;Darwin&quot;</span><span class="token punctuation">:</span>
                <span class="token keyword">from</span> subprocess <span class="token keyword">import</span> run
                run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">from</span> subprocess <span class="token keyword">import</span> run
                run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;xdg-open&quot;</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
        Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>open_qrcode<span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            resp <span class="token operator">=</span> get_qrcode_status<span class="token punctuation">(</span>qrcode_token<span class="token punctuation">)</span>
        <span class="token keyword">except</span> TimeoutError<span class="token punctuation">:</span>
            <span class="token keyword">continue</span>
        status <span class="token operator">=</span> resp<span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> status <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;[status=0] qrcode: waiting&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> status <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;[status=1] qrcode: scanned&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> status <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;[status=2] qrcode: signed in&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">elif</span> status <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> OSError<span class="token punctuation">(</span><span class="token string">&quot;[status=-1] qrcode: expired&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> status <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> OSError<span class="token punctuation">(</span><span class="token string">&quot;[status=-2] qrcode: canceled&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> OSError<span class="token punctuation">(</span><span class="token string">&quot;qrcode: aborted with %r&quot;</span> <span class="token operator">%</span> resp<span class="token punctuation">)</span>
    <span class="token keyword">return</span> post_qrcode_result<span class="token punctuation">(</span>qrcode_token<span class="token punctuation">[</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> app<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    resp <span class="token operator">=</span> login_with_qrcode<span class="token punctuation">(</span>args<span class="token punctuation">.</span>app<span class="token punctuation">,</span> scan_in_console<span class="token operator">=</span><span class="token keyword">not</span> args<span class="token punctuation">.</span>open_qrcode<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;; &quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">&quot;%s=%s&quot;</span> <span class="token operator">%</span> t <span class="token keyword">for</span> t <span class="token keyword">in</span> resp<span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#39;cookie&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),on={href:"https://gist.github.com/ChenyangGao/d26a592a0aeb13465511c885d5c7ad61",target:"_blank",rel:"noopener noreferrer"},en=n("strong",null,"https://gist.github.com/ChenyangGao/d26a592a0aeb13465511c885d5c7ad61",-1),pn=n("br",null,null,-1),cn={href:"https://www.python.org/downloads/",target:"_blank",rel:"noopener noreferrer"},ln=n("strong",null,"Python 3.11.x",-1),un=t(`<p>如果二维码在 <code>CMD</code> 和 <code>powershell</code> 两个终端无法显示正常，可以使用<code>-o</code>参数生成图片的方式来扫码，或者需要额外安装一个终端</p><ol><li>使用 <code>-o</code> 参数，生成图片方式然后扫码确认 <ul><li><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>python main<span class="token punctuation">.</span>py wechatmini <span class="token operator">-</span>o
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ol><p>可以获取的设备有如下，如果不填写设备默认使用的是 <code>Web</code> 端的设备</p><p><code>Web</code>，<code>android</code>，<code>ios</code>，<s><code>linux</code>，<code>mac</code>，<code>windows</code></s>，<code>tv</code>，<code>alipaymini</code>，<code>wechatmini</code>，<code>qandroid</code></p><ul><li><code>alipaymini</code> 和 <code>wechatmini</code> 分别是支付宝小程序和微信小程序</li><li><strong>Windows、Mac、Linux 应该不能使用了，最近官方把客户端下架了</strong></li><li>建议使用一些自己不常用的设备，否则登录会将之前的挤掉</li></ul><hr>`,6),rn={start:"2"},dn=n("p",null,"另外安装终端",-1),kn={href:"https://apps.microsoft.com/detail/9n0dx20hk701?rtc=1&hl=zh-cn&gl=CN",target:"_blank",rel:"noopener noreferrer"},vn={href:"https://github.com/microsoft/terminal/releases",target:"_blank",rel:"noopener noreferrer"},mn=n("li",null,[n("p",null,"其它方式自行解决")],-1),bn=n("hr",null,null,-1),qn=n("p",null,[s("执行命令，获取二维码 APP扫码获取 "),n("code",null,"Cookie")],-1),hn=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[s("PS C:"),n("span",{class:"token punctuation"},"\\"),s("Users"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"233"),n("span",{class:"token punctuation"},"\\"),s("Desktop"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"11"),n("span",{class:"token operator"},[n("span",{class:"token file-descriptor important"},"5"),s(">")]),s(" python "),n("span",{class:"token parameter variable"},"--version"),s(`
Python `),n("span",{class:"token number"},"3.12"),s(`.2
PS C:`),n("span",{class:"token punctuation"},"\\"),s("Users"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"233"),n("span",{class:"token punctuation"},"\\"),s("Desktop"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"11"),n("span",{class:"token operator"},[n("span",{class:"token file-descriptor important"},"5"),s(">")]),s(` python main.py wechatmini
█▀▀▀▀▀▀▀█▀▀▀▀█▀███▀▀▀█▀█▀▀▀██▀█▀▀▀▀▀▀▀█
█ █▀▀▀█ █ █▀▄▀█▄▀▀█▀█  ▄█▀▀ █▀█ █▀▀▀█ █
█ █   █ █▀█  ▄ ▄▀▄ ▀ ▀▄ █▀▄▀█▀█ █   █ █
█ ▀▀▀▀▀ █▀█ ▄▀▄ ▄ ▄ █ ▄▀▄▀█▀█▀█ ▀▀▀▀▀ █
█▀██▀▀▀▀▀▀▀ ▄█ ▀█ █▀▀▀ █▀ ▄▄▄ ▀██▀█▀▀▀█
██▄▀▀▄▀▀▀▀ ▄██▀▄██▀██▄█ █▀▀▀ ▀▀▀▄▄▀ ▄▀█
█   ▀██▀████ ▀ ▀ ▀ █▀ ▀▀▄▄▀▄ █▄▀▄▄ ▀▀▀█
█ ▄▀▀█▄▀█▀▀██ ▀▀▀▀ ▄▀ ▀███▀██▀▄▀▀▄▄   █
██▄█ ▄▀▀█▄   ▀█▄▀▄▄ █ █▀ ▄▀▀  ▄▀█▀█▀█▀█
███▄ █ ▀ ▀█  █▄ ▀▀▀▀█▀█▀█ ▄▀▀ ▄ █  ██▄█
█ █▀▀▀█ █ ▄▄▀▄▄▀ █▄▄▀█▀ █▀▄█  ▀▀▀ ▀█▀ █
█ █   █ █▄ ▄▀ █▀▀ ▀▄▀▀█▀▀  █ █ ▄█▀▄▄ ▀█
█ ▀▀▀▀▀ █▀  █▄▀ ▀ ▄█▄ █▄▀▀█▄ ▀ ▀▄▄ ▄▄ █
▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_n=n("p",null,"直接执行 二维码会出现在终端中进行显示",-1),gn=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[s("PS C:"),n("span",{class:"token punctuation"},"\\"),s("Users"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"233"),n("span",{class:"token punctuation"},"\\"),s("Desktop"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"11"),n("span",{class:"token operator"},[n("span",{class:"token file-descriptor important"},"5"),s(">")]),s(" python "),n("span",{class:"token parameter variable"},"--version"),s(`
Python `),n("span",{class:"token number"},"3.12"),s(`.2
PS C:`),n("span",{class:"token punctuation"},"\\"),s("Users"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"233"),n("span",{class:"token punctuation"},"\\"),s("Desktop"),n("span",{class:"token punctuation"},"\\"),n("span",{class:"token number"},"11"),n("span",{class:"token operator"},[n("span",{class:"token file-descriptor important"},"5"),s(">")]),s(" python main.py wechatmini "),n("span",{class:"token parameter variable"},"-o"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),wn=n("p",null,[s("使用 "),n("code",null,"-o"),s(" 参数后会自动弹出一张二维码图片")],-1),yn=t('<br><h3 id="秒传" tabindex="-1"><a class="header-anchor" href="#秒传" aria-hidden="true">#</a> <strong>秒传</strong></h3><ul><li><strong>v.3.27.0</strong> 版本 增强秒传：可以直接通过复制方式来和<code>阿里云盘Open</code>进行相互秒传文件 <ul><li>前提是要从115秒传到阿里云盘Open的文件，阿里云盘Open已经存在，否则就是正常复制任务。</li><li>如果将115的文件秒传到阿里云盘，需要将阿里云盘的秒传选项打开否则为正常模式上传</li></ul></li></ul><p>如果要使用秒传来上传文件建议在自己家用电脑本地搭建一个AList添加一个<code>本地存储</code>和<code>115云盘</code>进行复制秒传这样节省资源。</p><br><h3 id="离线下载" tabindex="-1"><a class="header-anchor" href="#离线下载" aria-hidden="true">#</a> <strong>离线下载</strong></h3>',6),fn={style:{color:"rgb(24, 144, 255)"}},xn={fill:"none","stroke-width":"0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"toolbar-toggle hope-icon hope-c-XNyZK hope-c-PJLV hope-c-PJLV-ifkxHPo-css",height:"1em",width:"1em",style:{overflow:"visible"}},An=n("path",{fill:"currentColor",d:"M7 14a2 2 0 100-4 2 2 0 000 4zM14 12a2 2 0 11-4 0 2 2 0 014 0zM17 14a2 2 0 100-4 2 2 0 000 4z"},null,-1),Cn=n("path",{fill:"currentColor","fill-rule":"evenodd",d:"M24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12zm-2 0c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z","clip-rule":"evenodd"},null,-1),En=[An,Cn],Pn={style:{color:"rgb(24, 144, 255)"}},Mn={fill:"currentColor","stroke-width":"0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"hope-icon hope-c-XNyZK hope-c-PJLV hope-c-PJLV-iipViGO-css",tips:"offline_download",height:"1em",width:"1em",style:{overflow:"visible"}},Kn=n("path",{fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32",d:"M421.83 293.82A144 144 0 00218.18 90.17M353.94 225.94a48 48 0 00-67.88-67.88"},null,-1),Tn=n("path",{"stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M192 464v-48M90.18 421.82l33.94-33.94M48 320h48"},null,-1),Dn=n("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32",d:"M286.06 158.06L172.92 271.19a32 32 0 01-45.25 0L105 248.57a32 32 0 010-45.26L218.18 90.17M421.83 293.82L308.69 407a32 32 0 01-45.26 0l-22.62-22.63a32 32 0 010-45.26l113.13-113.17M139.6 169.98l67.88 67.89M275.36 305.75l67.89 67.88"},null,-1),Sn=[Kn,Tn,Dn],zn=n("code",null,"115 Cloud",-1),Fn=t('<ul><li>支持：<code>magne</code>、<code>http</code>、 <code>ed2k</code> 链接</li></ul><p>仅支持使用115个人云盘使用离线下载，非115个人云盘会提示如下错误，<strong>虽然添加离线下载提示成功但是在后台会提示错误</strong></p><ul><li>unsupported storage driver for offline download, only 115 Cloud is supported</li></ul><p><img src="'+R+'" alt=""></p>',4),Rn={style:{color:"rgb(24, 144, 255)"}},Ln={fill:"currentColor","stroke-width":"0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"hope-icon hope-c-XNyZK hope-c-PJLV hope-c-PJLV-ifkxHPo-css",tips:"refresh",height:"1em",width:"1em",style:{overflow:"visible"}},Wn=n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),Gn=n("path",{d:"M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"},null,-1),Nn=[Wn,Gn],Qn=n("li",null,"目前当下载成功后，删除离线列表中完成的任务",-1),In=n("li",null,"115已经在离线列表中的任务url不能再次添加",-1),Jn=n("br",null,null,-1),Un=n("h3",{id:"默认使用的下载方式",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#默认使用的下载方式","aria-hidden":"true"},"#"),s(),n("strong",null,"默认使用的下载方式")],-1),On=t('<h2 id="_115网盘分享" tabindex="-1"><a class="header-anchor" href="#_115网盘分享" aria-hidden="true">#</a> <strong>115网盘分享</strong></h2><p><img src="'+z+'" alt="url_demo"></p><p><code>分享链接ID</code><sup>1</sup> 和 <code>分享链接提取码</code><sup>2</sup> 分别如何获取一目了然</p><h3 id="根文件夹id" tabindex="-1"><a class="header-anchor" href="#根文件夹id" aria-hidden="true">#</a> <strong>根文件夹ID</strong></h3><p>默认为空，挂载整个目录文件。</p><p>文件夹ID 分根文件夹ID和子文件夹ID，下面分别演示了如何获取<code>分享根文件夹目录ID</code><sup>1</sup>以及<code>其它子文件夹目录ID</code><sup>2</sup></p>',6),Vn=n("p",null,"打开开发者模式(F12)先将请求全部清空，我们进入文件夹，先将全部请求清空，",-1),Zn=n("p",null,[s("我们再点击根文件夹进入，右侧会有一个新的请求，然后选择"),n("code",null,"载荷"),s("就能看到我们的这个文件夹的ID (cid)")],-1),Bn=n("p",null,[n("img",{src:T,alt:"url_demo"})],-1),Hn=n("p",null,"打开开发者模式(F12)先将请求全部清空，我们进入文件夹，先将全部请求清空，",-1),jn=n("p",null,[s("右侧会有一个新的请求，然后选择"),n("code",null,"预览"),s(" 然后进行展开查看，就可以看到其它子文件夹的ID (cid)")],-1),Xn=n("p",null,[n("img",{src:D,alt:"url_demo"})],-1),Yn=t('<br><h3 id="错误提示" tabindex="-1"><a class="header-anchor" href="#错误提示" aria-hidden="true">#</a> <strong>错误提示</strong></h3><p>例如下图所示的115分享链接分享过期，但是分享链接还能打开</p><p><img src="'+F+'" alt="url_demo"></p><p>但是在添加保存时候会出现如下错误码：</p><p><code>Failed init storage but storage is already created: failed init storage: failed to get share snap: json: cannot unmarshal number into Go struct field .data.shareinfo.share_state of type string </code></p><h3 id="默认使用的下载方式-1" tabindex="-1"><a class="header-anchor" href="#默认使用的下载方式-1" aria-hidden="true">#</a> <strong>默认使用的下载方式</strong></h3>',7),$n=M({__name:"115.html",setup(ns){const u=k("获取二维码"),o=k(0),q=k(""),h=k(""),r=k(""),C=async()=>{u.value="等待...",o.value=1;const e=await(await fetch(`${g()}/proxy/qrcodeapi.115.com/api/1.0/web/1.0/token`)).json();console.log(e),u.value="使用115网盘 APP 扫描然后点击",o.value=2,r.value={uid:e.data.uid,time:e.data.time.toString(),sign:e.data.sign,_:(new Date().getTime()/1e3).toString()},q.value=`${g()}/qr/?size=400&text=${encodeURIComponent(e.data.qrcode)}`},E=async()=>{o.value=3,u.value="等待...";const e=await(await fetch(`${g()}/proxy/qrcodeapi.115.com/get/status/?uid=${r.value.uid}&time=${r.value.time}&sign=${r.value.sign}&_=${r.value._}`)).json(),{data:{version:d,status:p,msg:_}}=e;if(p!==2){o.value=2,u.value="使用115网盘 APP 扫描然后点击",alert("Status:"+p);return}h.value=r.value.uid,u.value="获取 Token 成功",o.value=4,console.log(e)},P=async()=>{o.value===0&&C(),o.value===2&&E()};return(w,e)=>{const d=v("ExternalLinkIcon"),p=v("Badge"),_=v("Tabs"),y=v("Mermaid");return m(),b("div",null,[L,n("p",null,[s("如 "),n("a",W,[s("https://115.com/?cid=249163533602609229&offset=0&tab=&mode=wangpan"),a(d)])]),G,n("p",null,[n("button",{disabled:o.value===3||o.value===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:P},[Q,s(" "+f(u.value),1),I],8,N)]),x(n("div",J,[n("img",{src:q.value},null,8,U)],512),[[A,q.value]]),x(n("div",null,[n("div",O,[n("p",V,"Token: "+f(h.value),1)])],512),[[A,h.value]]),Z,n("ol",null,[n("li",null,[s("点击 "),B,s(),a(p,{text:"获取二维码",type:"tip",color:"rgb(112,198,190)",vertical:"middle"}),s("，然后使用115手机APP端进行扫码")]),n("li",null,[s("APP扫码登录确认后，点击 "),H,s(" 按钮，获取 "),a(p,{text:"Token",type:"info",vertical:"middle"})]),n("li",null,[s("将获取到的 "),a(p,{text:"Token",type:"info",vertical:"middle"}),s(" 添加到 AList 115驱动的 "),j,s(" 选项內，然后选择"),X,s("设备 (Cookie选项留空) "),Y]),n("li",null,[s("填写 "),a(p,{text:"Token",type:"info",vertical:"middle"}),s(" 选择设备保存后会自动将 "),a(p,{text:"Token",type:"info",vertical:"middle"}),s(" 获取对应设备的 Cookie 进行自动填写")])]),$,n("details",nn,[sn,n("details",an,[tn,n("p",null,[s("源码来自："),n("a",on,[en,a(d)])])]),pn,n("ol",null,[n("li",null,[n("p",null,[s("需要安装 "),n("a",cn,[ln,a(d)]),s(" 以上版本")])]),n("li",null,[un,n("ol",rn,[n("li",null,[dn,n("ul",null,[n("li",null,[s("Windows Store："),n("strong",null,[n("a",kn,[s("https://apps.microsoft.com/detail/9n0dx20hk701?rtc=1&hl=zh-cn&gl=CN"),a(d)])])]),n("li",null,[s("GitHub 下载："),n("strong",null,[n("a",vn,[s("https://github.com/microsoft/terminal/releases"),a(d)])])])])]),mn])])]),bn,qn,a(_,{id:"181",data:[{id:"直接执行"},{id:"使用-o参数"}],"tab-id":"qr"},{title0:i(({value:c,isActive:l})=>[s("直接执行")]),title1:i(({value:c,isActive:l})=>[s("使用-o参数")]),tab0:i(({value:c,isActive:l})=>[hn,_n]),tab1:i(({value:c,isActive:l})=>[gn,wn]),_:1})]),yn,a(p,{text:"v3.37.0",type:"info",vertical:"middle"}),s(" 及以上版本支持在AList调用115离线下载功能"),n("p",null,[s("右下角选择 "),n("span",fn,[(m(),b("svg",xn,En))]),n("span",Pn,[(m(),b("svg",Mn,Sn))]),s(" 离线下载选项选择"),zn]),Fn,n("ul",null,[n("li",null,[s("使用115离线下载的一些提示 "),n("ol",null,[n("li",null,[s("可能会发生不同步的问题（手动右下角刷新 "),n("span",Rn,[(m(),b("svg",Ln,Nn))]),s("）")]),Qn,In])])]),Jn,Un,a(y,{id:"mermaid-279",code:"eJzT1dXlKsksyUm1Uni5e8aLdUue7N3/fMqK57Nank5e9Xx575Md3S/27n02befTPf3v98znAqlPy8kvT85ILCpRCHHiUgCC4pLKnFSFREOFtMycHCvlpKQ0neKSovzsVCvlNDMzKFu3PDOlJMPKqKBCJzk/J78IKJeWhqzdCKo9Lc3c1NwUboKxsTGqCSYFFRBtpUnpRYkFGQqZKamGCtEKsWDRREMwlZqXAuVGGxsYxVpZWRXn56Ym5yQWF9sCQQ3EszWJRtFA3z7r2P5i3b6nS9ohRoBVuaSmKcC1wFxmaQZRYBj9bM6aZ3N2Pdm9+PmEtlhdPaDelw2derp2WA1MMoyGqAwN8iGoODknMzkbFJhKenr6KUWZZalFxfrJ+bm5+Xl6GSW5OcrlqUkpiWW6z9dOez51qRKSniQy9CQTrQcAkHnb9A=="}),On,a(_,{id:"298",data:[{id:"1分享根文件夹目录ID"},{id:"2其它子文件夹目录ID"}],"tab-id":"115"},{title0:i(({value:c,isActive:l})=>[s("1分享根文件夹目录ID")]),title1:i(({value:c,isActive:l})=>[s("2其它子文件夹目录ID")]),tab0:i(({value:c,isActive:l})=>[Vn,Zn,Bn]),tab1:i(({value:c,isActive:l})=>[Hn,jn,Xn]),_:1}),Yn,a(y,{id:"mermaid-341",code:"eJzT1dXlKsksyUm1Uni5e8aLdUue7N3/fMqK57Nank5e9Xx575Md3S/27n02befTPf3v98znAqlPy8kvT85ILCpRCHHiUgCC4pLKnFSFREOFtMycHCvlpKQ0neKSovzsVCvlNDMzKFu3PDOlJMPKqKBCJzk/J78IKJeWhqzdCKo9Lc3c1NwUboKxsTGqCSYFFRBtpUnpRYkFGQqZKamGCtEKsWDRREMwlZqXAuVGGxsYxVpZWRXn56Ym5yQWF9sCQQ3EszWJRtFA3z7r2P5i3b6nS9ohRoBVuaSmKcC1wFxmaQZRYBj9bM6aZ3N2Pdm9+PmEtlhdPaDelw2derp2WA1MMoyGqAwN8iGoODknMzkbFJhKenr6KUWZZalFxfrJ+bm5+Xl6GSW5OcrlqUkpiWW6z9dOez51qRKSniQy9CQTrQcAkHnb9A=="})])}}}),os=K($n,[["__file","115.html.vue"]]);export{os as default};
